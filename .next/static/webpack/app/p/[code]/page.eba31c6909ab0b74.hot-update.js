"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/p/[code]/page",{

/***/ "(app-pages-browser)/./app/p/[code]/payments.js":
/*!**********************************!*\
  !*** ./app/p/[code]/payments.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PaymentsFeed)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/api */ \"(app-pages-browser)/./lib/api.js\");\n// app/p/[code]/payments.js\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n // relies on NEXT_PUBLIC_API_BASE\nfunction PaymentsFeed(param) {\n    let { publicCode, currency = 'USD', pageSize = 10 } = param;\n    _s();\n    const [items, setItems] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]); // accumulated results\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // pagination guards in refs\n    const pageRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0); // next page to load\n    const hasMoreRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    const loadingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const fetchedPagesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set()); // pages already fetched\n    const abortRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // sentinel + observer\n    const sentinelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const observerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const initializedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const fmtMoney = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PaymentsFeed.useCallback[fmtMoney]\": (n)=>typeof n === 'number' ? n.toLocaleString(undefined, {\n                style: 'currency',\n                currency,\n                maximumFractionDigits: 2\n            }) : n\n    }[\"PaymentsFeed.useCallback[fmtMoney]\"], [\n        currency\n    ]);\n    const fmtDate = (iso)=>{\n        try {\n            return new Date(iso).toLocaleString();\n        } catch (e) {\n            return iso || '—';\n        }\n    };\n    const fetchPage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PaymentsFeed.useCallback[fetchPage]\": async (p)=>{\n            if (!publicCode) return;\n            if (loadingRef.current) return;\n            if (!hasMoreRef.current) return;\n            if (fetchedPagesRef.current.has(p)) return;\n            loadingRef.current = true;\n            setError(null);\n            // cancel in-flight request if any\n            if (abortRef.current) abortRef.current.abort();\n            const ac = new AbortController();\n            abortRef.current = ac;\n            try {\n                const url = \"\".concat(_lib_api__WEBPACK_IMPORTED_MODULE_2__.API_BASE, \"/public/payment-requests/\").concat(encodeURIComponent(publicCode), \"/payments?page=\").concat(p, \"&size=\").concat(pageSize);\n                const res = await fetch(url, {\n                    cache: 'no-store',\n                    signal: ac.signal\n                });\n                if (!res.ok) throw new Error(\"HTTP \".concat(res.status));\n                const json = await res.json();\n                const content = Array.isArray(json === null || json === void 0 ? void 0 : json.content) ? json.content : [];\n                setItems({\n                    \"PaymentsFeed.useCallback[fetchPage]\": (prev)=>{\n                        const seen = new Set(prev.map({\n                            \"PaymentsFeed.useCallback[fetchPage]\": (x)=>x.id\n                        }[\"PaymentsFeed.useCallback[fetchPage]\"]));\n                        const next = [\n                            ...prev\n                        ];\n                        for (const it of content){\n                            if (!seen.has(it.id)) next.push(it);\n                        }\n                        return next;\n                    }\n                }[\"PaymentsFeed.useCallback[fetchPage]\"]);\n                fetchedPagesRef.current.add(p);\n                hasMoreRef.current = (json === null || json === void 0 ? void 0 : json.last) === false; // more pages only if last=false\n                pageRef.current = p + 1; // advance\n            } catch (e) {\n                if ((e === null || e === void 0 ? void 0 : e.name) !== 'AbortError') setError((e === null || e === void 0 ? void 0 : e.message) || 'Impossible de charger les paiements.');\n            } finally{\n                if (abortRef.current === ac) abortRef.current = null;\n                loadingRef.current = false;\n            }\n        }\n    }[\"PaymentsFeed.useCallback[fetchPage]\"], [\n        publicCode,\n        pageSize\n    ]);\n    // initialize per code\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PaymentsFeed.useEffect\": ()=>{\n            // reset all state/refs\n            setItems([]);\n            setError(null);\n            fetchedPagesRef.current.clear();\n            pageRef.current = 0;\n            hasMoreRef.current = true;\n            loadingRef.current = false;\n            initializedRef.current = true;\n            fetchPage(0);\n            return ({\n                \"PaymentsFeed.useEffect\": ()=>{\n                    if (abortRef.current) abortRef.current.abort();\n                }\n            })[\"PaymentsFeed.useEffect\"];\n        }\n    }[\"PaymentsFeed.useEffect\"], [\n        publicCode,\n        fetchPage\n    ]);\n    // intersection observer: load next page when sentinel is visible\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PaymentsFeed.useEffect\": ()=>{\n            if (!initializedRef.current || !sentinelRef.current) return;\n            observerRef.current = new IntersectionObserver({\n                \"PaymentsFeed.useEffect\": (entries)=>{\n                    const first = entries[0];\n                    if (!(first === null || first === void 0 ? void 0 : first.isIntersecting)) return;\n                    // only fire when not loading and more pages exist\n                    if (!loadingRef.current && hasMoreRef.current) {\n                        fetchPage(pageRef.current);\n                    }\n                }\n            }[\"PaymentsFeed.useEffect\"], {\n                root: null,\n                rootMargin: '200px 0px',\n                threshold: 0.1\n            });\n            observerRef.current.observe(sentinelRef.current);\n            return ({\n                \"PaymentsFeed.useEffect\": ()=>{\n                    var _observerRef_current;\n                    return (_observerRef_current = observerRef.current) === null || _observerRef_current === void 0 ? void 0 : _observerRef_current.disconnect();\n                }\n            })[\"PaymentsFeed.useEffect\"];\n        }\n    }[\"PaymentsFeed.useEffect\"], [\n        fetchPage\n    ]);\n    const Empty = /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            padding: 12,\n            border: '1px dashed var(--brand-border)',\n            borderRadius: 12,\n            background: '#fff'\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"label\",\n                style: {\n                    marginBottom: 4\n                },\n                children: \"Aucun paiement\"\n            }, void 0, false, {\n                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                lineNumber: 116,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-muted\",\n                children: \"Les paiements appara\\xeetront ici au fur et \\xe0 mesure.\"\n            }, void 0, false, {\n                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                lineNumber: 117,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n        lineNumber: 115,\n        columnNumber: 9\n    }, this);\n    const Skeleton = /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 8\n        },\n        children: Array.from({\n            length: 3\n        }).map((_, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    border: '1px solid var(--brand-border)',\n                    borderRadius: 12,\n                    background: '#fff',\n                    padding: 12,\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    gap: 8\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            width: '60%',\n                            height: 12,\n                            background: '#F1F5F9',\n                            borderRadius: 6\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                        lineNumber: 128,\n                        columnNumber: 21\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            width: 80,\n                            height: 12,\n                            background: '#F1F5F9',\n                            borderRadius: 6\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                        lineNumber: 129,\n                        columnNumber: 21\n                    }, this)\n                ]\n            }, i, true, {\n                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                lineNumber: 124,\n                columnNumber: 17\n            }, this))\n    }, void 0, false, {\n        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n        lineNumber: 122,\n        columnNumber: 9\n    }, this);\n    const loading = loadingRef.current;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n        className: \"card card--plain\",\n        style: {\n            background: '#fff',\n            marginTop: 12\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                className: \"card-title\",\n                children: \"Paiements\"\n            }, void 0, false, {\n                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                lineNumber: 139,\n                columnNumber: 13\n            }, this),\n            !items.length && !loading && !error && Empty,\n            !!items.length && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: 8,\n                    marginTop: 8\n                },\n                children: items.map((p)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            border: '1px solid var(--brand-border)',\n                            borderRadius: 12,\n                            background: '#fff',\n                            padding: 12,\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                            gap: 8\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                style: {\n                                    minWidth: 0\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        style: {\n                                            fontWeight: 800,\n                                            color: '#0f172a'\n                                        },\n                                        children: fmtMoney(p.amount)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                                        lineNumber: 161,\n                                        columnNumber: 33\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        style: {\n                                            fontSize: 12,\n                                            color: '#0f172a',\n                                            marginTop: 2,\n                                            overflow: 'hidden',\n                                            textOverflow: 'ellipsis',\n                                            whiteSpace: 'nowrap'\n                                        },\n                                        title: p.payerName || undefined,\n                                        children: p.payerName || '—'\n                                    }, void 0, false, {\n                                        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                                        lineNumber: 164,\n                                        columnNumber: 33\n                                    }, this),\n                                    p.payerReference && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        style: {\n                                            fontSize: 11,\n                                            color: '#64748B',\n                                            marginTop: 2,\n                                            overflow: 'hidden',\n                                            textOverflow: 'ellipsis',\n                                            whiteSpace: 'nowrap'\n                                        },\n                                        title: p.payerReference,\n                                        children: p.payerReference\n                                    }, void 0, false, {\n                                        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                                        lineNumber: 178,\n                                        columnNumber: 37\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                                lineNumber: 160,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                style: {\n                                    fontSize: 12,\n                                    color: '#64748B',\n                                    whiteSpace: 'nowrap'\n                                },\n                                children: fmtDate(p.createdAt)\n                            }, void 0, false, {\n                                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                                lineNumber: 195,\n                                columnNumber: 29\n                            }, this)\n                        ]\n                    }, p.id, true, {\n                        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                        lineNumber: 146,\n                        columnNumber: 25\n                    }, this))\n            }, void 0, false, {\n                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                lineNumber: 144,\n                columnNumber: 17\n            }, this),\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    marginTop: 8,\n                    border: '1px solid #FECACA',\n                    background: '#FEF2F2',\n                    borderRadius: 12,\n                    padding: 10,\n                    color: '#991B1B',\n                    fontSize: 13\n                },\n                children: error\n            }, void 0, false, {\n                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                lineNumber: 204,\n                columnNumber: 17\n            }, this),\n            loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    marginTop: 8\n                },\n                children: Skeleton\n            }, void 0, false, {\n                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                lineNumber: 213,\n                columnNumber: 17\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: sentinelRef,\n                style: {\n                    height: 1\n                }\n            }, void 0, false, {\n                fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n                lineNumber: 219,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/deniskalengawatshipamba/Documents/projects/fondeka/fondeka-pay/app/p/[code]/payments.js\",\n        lineNumber: 138,\n        columnNumber: 9\n    }, this);\n}\n_s(PaymentsFeed, \"+YaDF6/i7Z1d4aBUFosTbtTA0Vw=\");\n_c = PaymentsFeed;\nvar _c;\n$RefreshReg$(_c, \"PaymentsFeed\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9wL1tjb2RlXS9wYXltZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLDJCQUEyQjs7O0FBRzZDO0FBQzVCLENBQUMsaUNBQWlDO0FBRS9ELFNBQVNNLGFBQWEsS0FBK0M7UUFBL0MsRUFBRUMsVUFBVSxFQUFFQyxXQUFXLEtBQUssRUFBRUMsV0FBVyxFQUFFLEVBQUUsR0FBL0M7O0lBQ2pDLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBUyxHQUFHUCwrQ0FBUUEsQ0FBQyxFQUFFLEdBQVksc0JBQXNCO0lBQ3ZFLE1BQU0sQ0FBQ1EsT0FBT0MsU0FBUyxHQUFHVCwrQ0FBUUEsQ0FBQztJQUVuQyw0QkFBNEI7SUFDNUIsTUFBTVUsVUFBVVgsNkNBQU1BLENBQUMsSUFBMEIsb0JBQW9CO0lBQ3JFLE1BQU1ZLGFBQWFaLDZDQUFNQSxDQUFDO0lBQzFCLE1BQU1hLGFBQWFiLDZDQUFNQSxDQUFDO0lBQzFCLE1BQU1jLGtCQUFrQmQsNkNBQU1BLENBQUMsSUFBSWUsUUFBYyx3QkFBd0I7SUFDekUsTUFBTUMsV0FBV2hCLDZDQUFNQSxDQUFDO0lBRXhCLHNCQUFzQjtJQUN0QixNQUFNaUIsY0FBY2pCLDZDQUFNQSxDQUFDO0lBQzNCLE1BQU1rQixjQUFjbEIsNkNBQU1BLENBQUM7SUFDM0IsTUFBTW1CLGlCQUFpQm5CLDZDQUFNQSxDQUFDO0lBRTlCLE1BQU1vQixXQUFXdEIsa0RBQVdBOzhDQUN4QixDQUFDdUIsSUFDRyxPQUFPQSxNQUFNLFdBQ1BBLEVBQUVDLGNBQWMsQ0FBQ0MsV0FBVztnQkFBRUMsT0FBTztnQkFBWW5CO2dCQUFVb0IsdUJBQXVCO1lBQUUsS0FDcEZKOzZDQUNWO1FBQUNoQjtLQUFTO0lBR2QsTUFBTXFCLFVBQVUsQ0FBQ0M7UUFDYixJQUFJO1lBQUUsT0FBTyxJQUFJQyxLQUFLRCxLQUFLTCxjQUFjO1FBQUksRUFBRSxVQUFNO1lBQUUsT0FBT0ssT0FBTztRQUFLO0lBQzlFO0lBRUEsTUFBTUUsWUFB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QUUyRSxTQUFTLElBQUlsRjtrREFFckJPLEVBQUUyRSxTQUFTLElBQUk7Ozs7OztvQ0FFbkIzRSxFQUFFNEUsY0FBYyxrQkFDYiw4REFBQ2pDO3dDQUNHakQsT0FBTzs0Q0FDSDRFLFVBQVU7NENBQ1ZGLE9BQU87NENBQ1BKLFdBQVc7NENBQ1hPLFVBQVU7NENBQ1ZDLGNBQWM7NENBQ2RDLFlBQVk7d0NBQ2hCO3dDQUNBQyxPQUFPMUUsRUFBRTRFLGNBQWM7a0RBRXRCNUUsRUFBRTRFLGNBQWM7Ozs7Ozs7Ozs7OzswQ0FNN0IsOERBQUNqQztnQ0FBSWpELE9BQU87b0NBQUU0RSxVQUFVO29DQUFJRixPQUFPO29DQUFXSyxZQUFZO2dDQUFTOzBDQUM5RDdFLFFBQVFJLEVBQUU2RSxTQUFTOzs7Ozs7O3VCQWpEbkI3RSxFQUFFdUIsRUFBRTs7Ozs7Ozs7OztZQXdEeEI1Qyx1QkFDRyw4REFBQ2dFO2dCQUFJakQsT0FBTztvQkFDUnNFLFdBQVc7b0JBQUduQixRQUFRO29CQUFxQkUsWUFBWTtvQkFDdkRELGNBQWM7b0JBQUlGLFNBQVM7b0JBQUl3QixPQUFPO29CQUFXRSxVQUFVO2dCQUMvRDswQkFDSzNGOzs7Ozs7WUFJUm1GLHlCQUNHLDhEQUFDbkI7Z0JBQUlqRCxPQUFPO29CQUFFc0UsV0FBVztnQkFBRTswQkFDdEJkOzs7Ozs7MEJBS1QsOERBQUNQO2dCQUFJbUMsS0FBSzNGO2dCQUFhTyxPQUFPO29CQUFFbUUsUUFBUTtnQkFBRTs7Ozs7Ozs7Ozs7O0FBR3REO0dBdk53QnhGO0tBQUFBIiwic291cmNlcyI6WyIvVXNlcnMvZGVuaXNrYWxlbmdhd2F0c2hpcGFtYmEvRG9jdW1lbnRzL3Byb2plY3RzL2ZvbmRla2EvZm9uZGVrYS1wYXkvYXBwL3AvW2NvZGVdL3BheW1lbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcC9wL1tjb2RlXS9wYXltZW50cy5qc1xuJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEFQSV9CQVNFIH0gZnJvbSAnLi4vLi4vLi4vbGliL2FwaSc7IC8vIHJlbGllcyBvbiBORVhUX1BVQkxJQ19BUElfQkFTRVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQYXltZW50c0ZlZWQoeyBwdWJsaWNDb2RlLCBjdXJyZW5jeSA9ICdVU0QnLCBwYWdlU2l6ZSA9IDEwIH0pIHtcbiAgICBjb25zdCBbaXRlbXMsIHNldEl0ZW1zXSA9IHVzZVN0YXRlKFtdKTsgICAgICAgICAgLy8gYWNjdW11bGF0ZWQgcmVzdWx0c1xuICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XG5cbiAgICAvLyBwYWdpbmF0aW9uIGd1YXJkcyBpbiByZWZzXG4gICAgY29uc3QgcGFnZVJlZiA9IHVzZVJlZigwKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIG5leHQgcGFnZSB0byBsb2FkXG4gICAgY29uc3QgaGFzTW9yZVJlZiA9IHVzZVJlZih0cnVlKTtcbiAgICBjb25zdCBsb2FkaW5nUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgICBjb25zdCBmZXRjaGVkUGFnZXNSZWYgPSB1c2VSZWYobmV3IFNldCgpKTsgICAgICAgLy8gcGFnZXMgYWxyZWFkeSBmZXRjaGVkXG4gICAgY29uc3QgYWJvcnRSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgICAvLyBzZW50aW5lbCArIG9ic2VydmVyXG4gICAgY29uc3Qgc2VudGluZWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3Qgb2JzZXJ2ZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgaW5pdGlhbGl6ZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gICAgY29uc3QgZm10TW9uZXkgPSB1c2VDYWxsYmFjayhcbiAgICAgICAgKG4pID0+XG4gICAgICAgICAgICB0eXBlb2YgbiA9PT0gJ251bWJlcidcbiAgICAgICAgICAgICAgICA/IG4udG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeSwgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pXG4gICAgICAgICAgICAgICAgOiBuLFxuICAgICAgICBbY3VycmVuY3ldXG4gICAgKTtcblxuICAgIGNvbnN0IGZtdERhdGUgPSAoaXNvKSA9PiB7XG4gICAgICAgIHRyeSB7IHJldHVybiBuZXcgRGF0ZShpc28pLnRvTG9jYWxlU3RyaW5nKCk7IH0gY2F0Y2ggeyByZXR1cm4gaXNvIHx8ICfigJQnOyB9XG4gICAgfTtcblxuICAgIGNvbnN0IGZldGNoUGFnZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChwKSA9PiB7XG4gICAgICAgIGlmICghcHVibGljQ29kZSkgcmV0dXJuO1xuICAgICAgICBpZiAobG9hZGluZ1JlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICAgIGlmICghaGFzTW9yZVJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICAgIGlmIChmZXRjaGVkUGFnZXNSZWYuY3VycmVudC5oYXMocCkpIHJldHVybjtcblxuICAgICAgICBsb2FkaW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICBzZXRFcnJvcihudWxsKTtcblxuICAgICAgICAvLyBjYW5jZWwgaW4tZmxpZ2h0IHJlcXVlc3QgaWYgYW55XG4gICAgICAgIGlmIChhYm9ydFJlZi5jdXJyZW50KSBhYm9ydFJlZi5jdXJyZW50LmFib3J0KCk7XG4gICAgICAgIGNvbnN0IGFjID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICBhYm9ydFJlZi5jdXJyZW50ID0gYWM7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke0FQSV9CQVNFfS9wdWJsaWMvcGF5bWVudC1yZXF1ZXN0cy8ke2VuY29kZVVSSUNvbXBvbmVudChwdWJsaWNDb2RlKX0vcGF5bWVudHM/cGFnZT0ke3B9JnNpemU9JHtwYWdlU2l6ZX1gO1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7IGNhY2hlOiAnbm8tc3RvcmUnLCBzaWduYWw6IGFjLnNpZ25hbCB9KTtcbiAgICAgICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBBcnJheS5pc0FycmF5KGpzb24/LmNvbnRlbnQpID8ganNvbi5jb250ZW50IDogW107XG4gICAgICAgICAgICBzZXRJdGVtcygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0KHByZXYubWFwKCh4KSA9PiB4LmlkKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IFsuLi5wcmV2XTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWVuLmhhcyhpdC5pZCkpIG5leHQucHVzaChpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZldGNoZWRQYWdlc1JlZi5jdXJyZW50LmFkZChwKTtcbiAgICAgICAgICAgIGhhc01vcmVSZWYuY3VycmVudCA9IGpzb24/Lmxhc3QgPT09IGZhbHNlOyAvLyBtb3JlIHBhZ2VzIG9ubHkgaWYgbGFzdD1mYWxzZVxuICAgICAgICAgICAgcGFnZVJlZi5jdXJyZW50ID0gcCArIDE7ICAgICAgICAgICAgICAgICAgIC8vIGFkdmFuY2VcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGU/Lm5hbWUgIT09ICdBYm9ydEVycm9yJykgc2V0RXJyb3IoZT8ubWVzc2FnZSB8fCAnSW1wb3NzaWJsZSBkZSBjaGFyZ2VyIGxlcyBwYWllbWVudHMuJyk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoYWJvcnRSZWYuY3VycmVudCA9PT0gYWMpIGFib3J0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgbG9hZGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LCBbcHVibGljQ29kZSwgcGFnZVNpemVdKTtcblxuICAgIC8vIGluaXRpYWxpemUgcGVyIGNvZGVcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyByZXNldCBhbGwgc3RhdGUvcmVmc1xuICAgICAgICBzZXRJdGVtcyhbXSk7XG4gICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICBmZXRjaGVkUGFnZXNSZWYuY3VycmVudC5jbGVhcigpO1xuICAgICAgICBwYWdlUmVmLmN1cnJlbnQgPSAwO1xuICAgICAgICBoYXNNb3JlUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICBsb2FkaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcblxuICAgICAgICBpbml0aWFsaXplZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgZmV0Y2hQYWdlKDApO1xuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoYWJvcnRSZWYuY3VycmVudCkgYWJvcnRSZWYuY3VycmVudC5hYm9ydCgpO1xuICAgICAgICB9O1xuICAgIH0sIFtwdWJsaWNDb2RlLCBmZXRjaFBhZ2VdKTtcblxuICAgIC8vIGludGVyc2VjdGlvbiBvYnNlcnZlcjogbG9hZCBuZXh0IHBhZ2Ugd2hlbiBzZW50aW5lbCBpcyB2aXNpYmxlXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpbml0aWFsaXplZFJlZi5jdXJyZW50IHx8ICFzZW50aW5lbFJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudCA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3QgPSBlbnRyaWVzWzBdO1xuICAgICAgICAgICAgICAgIGlmICghZmlyc3Q/LmlzSW50ZXJzZWN0aW5nKSByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gb25seSBmaXJlIHdoZW4gbm90IGxvYWRpbmcgYW5kIG1vcmUgcGFnZXMgZXhpc3RcbiAgICAgICAgICAgICAgICBpZiAoIWxvYWRpbmdSZWYuY3VycmVudCAmJiBoYXNNb3JlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2hQYWdlKHBhZ2VSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgcm9vdDogbnVsbCwgcm9vdE1hcmdpbjogJzIwMHB4IDBweCcsIHRocmVzaG9sZDogMC4xIH1cbiAgICAgICAgKTtcblxuICAgICAgICBvYnNlcnZlclJlZi5jdXJyZW50Lm9ic2VydmUoc2VudGluZWxSZWYuY3VycmVudCk7XG4gICAgICAgIHJldHVybiAoKSA9PiBvYnNlcnZlclJlZi5jdXJyZW50Py5kaXNjb25uZWN0KCk7XG4gICAgfSwgW2ZldGNoUGFnZV0pO1xuXG4gICAgY29uc3QgRW1wdHkgPSAoXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogMTIsIGJvcmRlcjogJzFweCBkYXNoZWQgdmFyKC0tYnJhbmQtYm9yZGVyKScsIGJvcmRlclJhZGl1czogMTIsIGJhY2tncm91bmQ6ICcjZmZmJyB9fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFiZWxcIiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDQgfX0+QXVjdW4gcGFpZW1lbnQ8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC1tdXRlZFwiPkxlcyBwYWllbWVudHMgYXBwYXJhw650cm9udCBpY2kgYXUgZnVyIGV0IMOgIG1lc3VyZS48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcblxuICAgIGNvbnN0IFNrZWxldG9uID0gKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGdhcDogOCB9fT5cbiAgICAgICAgICAgIHtBcnJheS5mcm9tKHsgbGVuZ3RoOiAzIH0pLm1hcCgoXywgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpfSBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tYnJhbmQtYm9yZGVyKScsIGJvcmRlclJhZGl1czogMTIsIGJhY2tncm91bmQ6ICcjZmZmJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTIsIGRpc3BsYXk6ICdmbGV4JywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOFxuICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiAnNjAlJywgaGVpZ2h0OiAxMiwgYmFja2dyb3VuZDogJyNGMUY1RjknLCBib3JkZXJSYWRpdXM6IDYgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyB3aWR0aDogODAsIGhlaWdodDogMTIsIGJhY2tncm91bmQ6ICcjRjFGNUY5JywgYm9yZGVyUmFkaXVzOiA2IH19IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcblxuICAgIGNvbnN0IGxvYWRpbmcgPSBsb2FkaW5nUmVmLmN1cnJlbnQ7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJjYXJkIGNhcmQtLXBsYWluXCIgc3R5bGU9e3sgYmFja2dyb3VuZDogJyNmZmYnLCBtYXJnaW5Ub3A6IDEyIH19PlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImNhcmQtdGl0bGVcIj5QYWllbWVudHM8L2gzPlxuXG4gICAgICAgICAgICB7IWl0ZW1zLmxlbmd0aCAmJiAhbG9hZGluZyAmJiAhZXJyb3IgJiYgRW1wdHl9XG5cbiAgICAgICAgICAgIHshIWl0ZW1zLmxlbmd0aCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6IDgsIG1hcmdpblRvcDogOCB9fT5cbiAgICAgICAgICAgICAgICAgICAge2l0ZW1zLm1hcCgocCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17cC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tYnJhbmQtYm9yZGVyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogMTIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcjZmZmJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogOCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBMZWZ0IGJsb2NrOiBuYW1lICsgb3B0aW9uYWwgcGF5ZXJSZWZlcmVuY2UgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtaW5XaWR0aDogMCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250V2VpZ2h0OiA4MDAsIGNvbG9yOiAnIzBmMTcyYScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm10TW9uZXkocC5hbW91bnQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17cC5wYXllck5hbWUgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cC5wYXllck5hbWUgfHwgJ+KAlCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cC5wYXllclJlZmVyZW5jZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDExLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyM2NDc0OEInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dE92ZXJmbG93OiAnZWxsaXBzaXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtwLnBheWVyUmVmZXJlbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwLnBheWVyUmVmZXJlbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogUmlnaHQ6IGRhdGUgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTIsIGNvbG9yOiAnIzY0NzQ4QicsIHdoaXRlU3BhY2U6ICdub3dyYXAnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm10RGF0ZShwLmNyZWF0ZWRBdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiA4LCBib3JkZXI6ICcxcHggc29saWQgI0ZFQ0FDQScsIGJhY2tncm91bmQ6ICcjRkVGMkYyJyxcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAxMiwgcGFkZGluZzogMTAsIGNvbG9yOiAnIzk5MUIxQicsIGZvbnRTaXplOiAxM1xuICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgICAgICB7ZXJyb3J9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7bG9hZGluZyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgICAgICAgICAgIHtTa2VsZXRvbn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHsvKiBTZW50aW5lbCBmb3IgaW5maW5pdGUgc2Nyb2xsICovfVxuICAgICAgICAgICAgPGRpdiByZWY9e3NlbnRpbmVsUmVmfSBzdHlsZT17eyBoZWlnaHQ6IDEgfX0gLz5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgICk7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiQVBJX0JBU0UiLCJQYXltZW50c0ZlZWQiLCJwdWJsaWNDb2RlIiwiY3VycmVuY3kiLCJwYWdlU2l6ZSIsIml0ZW1zIiwic2V0SXRlbXMiLCJlcnJvciIsInNldEVycm9yIiwicGFnZVJlZiIsImhhc01vcmVSZWYiLCJsb2FkaW5nUmVmIiwiZmV0Y2hlZFBhZ2VzUmVmIiwiU2V0IiwiYWJvcnRSZWYiLCJzZW50aW5lbFJlZiIsIm9ic2VydmVyUmVmIiwiaW5pdGlhbGl6ZWRSZWYiLCJmbXRNb25leSIsIm4iLCJ0b0xvY2FsZVN0cmluZyIsInVuZGVmaW5lZCIsInN0eWxlIiwibWF4aW11bUZyYWN0aW9uRGlnaXRzIiwiZm10RGF0ZSIsImlzbyIsIkRhdGUiLCJmZXRjaFBhZ2UiLCJwIiwiY3VycmVudCIsImhhcyIsImFib3J0IiwiYWMiLCJBYm9ydENvbnRyb2xsZXIiLCJ1cmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXMiLCJmZXRjaCIsImNhY2hlIiwic2lnbmFsIiwib2siLCJFcnJvciIsInN0YXR1cyIsImpzb24iLCJjb250ZW50IiwiQXJyYXkiLCJpc0FycmF5IiwicHJldiIsInNlZW4iLCJtYXAiLCJ4IiwiaWQiLCJuZXh0IiwiaXQiLCJwdXNoIiwiYWRkIiwibGFzdCIsImUiLCJuYW1lIiwibWVzc2FnZSIsImNsZWFyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiZmlyc3QiLCJpc0ludGVyc2VjdGluZyIsInJvb3QiLCJyb290TWFyZ2luIiwidGhyZXNob2xkIiwib2JzZXJ2ZSIsImRpc2Nvbm5lY3QiLCJFbXB0eSIsImRpdiIsInBhZGRpbmciLCJib3JkZXIiLCJib3JkZXJSYWRpdXMiLCJiYWNrZ3JvdW5kIiwiY2xhc3NOYW1lIiwibWFyZ2luQm90dG9tIiwiU2tlbGV0b24iLCJkaXNwbGF5IiwiZmxleERpcmVjdGlvbiIsImdhcCIsImZyb20iLCJsZW5ndGgiLCJfIiwiaSIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsIndpZHRoIiwiaGVpZ2h0IiwibG9hZGluZyIsInNlY3Rpb24iLCJtYXJnaW5Ub3AiLCJoMyIsIm1pbldpZHRoIiwiZm9udFdlaWdodCIsImNvbG9yIiwiYW1vdW50IiwiZm9udFNpemUiLCJvdmVyZmxvdyIsInRleHRPdmVyZmxvdyIsIndoaXRlU3BhY2UiLCJ0aXRsZSIsInBheWVyTmFtZSIsInBheWVyUmVmZXJlbmNlIiwiY3JlYXRlZEF0IiwicmVmIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/p/[code]/payments.js\n"));

/***/ })

});